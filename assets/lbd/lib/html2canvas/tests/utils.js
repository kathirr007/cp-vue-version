var fs=require("fs"),wd=require("wd"),path=require("path"),Promise=require("bluebird"),_=require("lodash");Promise.promisifyAll(fs);var colors={red:"[1;31m",blue:"[1;36m",violet:"[0;35m",green:"[0;32m",clear:"[0m"};function isHtmlFile(e){return".html"===path.extname(e)}function getTests(t){return fs.readdirAsync(t).map(function(e){var r=t+"/"+e;return fs.statAsync(r).then(function(e){return e.isDirectory()?getTests(r):r})}).then(function(e){return _.flatten(e).filter(isHtmlFile)})}function initBrowser(e){var r=wd.remote({hostname:"localhost",port:4445,user:process.env.SAUCE_USERNAME,pwd:process.env.SAUCE_ACCESS_KEY},"promiseChain");return process.env.TRAVIS_JOB_NUMBER?(e["tunnel-identifier"]=process.env.TRAVIS_JOB_NUMBER,e.name=process.env.TRAVIS_COMMIT.substring(0,10),e.build=process.env.TRAVIS_BUILD_NUMBER):e.name="Manual run",r.resolve(Promise).init(e).then(function(e){return Promise.resolve(e).disposer(function(){return r.quit()})})}function loadTestPage(r,t,n){return function(e){return r.get("http://localhost:"+n+"/"+t+"?selenium").then(function(){return e})}}module.exports.colors=colors,module.exports.getTests=getTests,module.exports.initBrowser=initBrowser,module.exports.loadTestPage=loadTestPage;