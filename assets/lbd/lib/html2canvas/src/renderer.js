function Renderer(e,r,t,a,n){this.width=e,this.height=r,this.images=t,this.options=a,this.document=n}Renderer.prototype.renderImage=function(e,r,t,a){var n=e.cssInt("paddingLeft"),o=e.cssInt("paddingTop"),i=e.cssInt("paddingRight"),d=e.cssInt("paddingBottom"),g=t.borders,s=r.width-(g[1].width+g[3].width+n+i),h=r.height-(g[0].width+g[2].width+o+d);this.drawImage(a,0,0,a.image.width||s,a.image.height||h,r.left+n+g[3].width,r.top+o+g[0].width,s,h)},Renderer.prototype.renderBackground=function(e,r,t){0<r.height&&0<r.width&&(this.renderBackgroundColor(e,r),this.renderBackgroundImage(e,r,t))},Renderer.prototype.renderBackgroundColor=function(e,r){var t=e.color("backgroundColor");t.isTransparent()||this.rectangle(r.left,r.top,r.width,r.height,t)},Renderer.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},Renderer.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},Renderer.prototype.renderBackgroundImage=function(o,i,d){o.parseBackgroundImages().reverse().forEach(function(e,r,t){switch(e.method){case"url":var a=this.images.get(e.args[0]);a?this.renderBackgroundRepeating(o,i,a,t.length-(r+1),d):log("Error loading background-image",e.args[0]);break;case"linear-gradient":case"gradient":var n=this.images.get(e.value);n?this.renderBackgroundGradient(n,i,d):log("Error loading background-image",e.args[0]);break;case"none":break;default:log("Unknown background-image type",e.args[0])}},this)},Renderer.prototype.renderBackgroundRepeating=function(e,r,t,a,n){var o=e.parseBackgroundSize(r,t.image,a),i=e.parseBackgroundPosition(r,t.image,a,o);switch(e.parseBackgroundRepeat(a)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(t,i,o,r,r.left+n[3],r.top+i.top+n[0],99999,o.height,n);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(t,i,o,r,r.left+i.left+n[3],r.top+n[0],o.width,99999,n);break;case"no-repeat":this.backgroundRepeatShape(t,i,o,r,r.left+i.left+n[3],r.top+i.top+n[0],o.width,o.height,n);break;default:this.renderBackgroundRepeat(t,i,o,{top:r.top,left:r.left},n[3],n[0])}};