var html2canvasNodeAttribute="data-html2canvas-node",html2canvasCanvasCloneAttribute="data-html2canvas-canvas-clone",html2canvasCanvasCloneIndex=0,html2canvasCloneIndex=0;function renderDocument(r,i,l,c,d){return createWindowClone(r,r,l,c,i,r.defaultView.pageXOffset,r.defaultView.pageYOffset).then(function(e){log("Document cloned");var t=html2canvasNodeAttribute+d,n="["+t+"='"+d+"']";r.querySelector(n).removeAttribute(t);var o=e.contentWindow,a=o.document.querySelector(n);return("function"==typeof i.onclone?Promise.resolve(i.onclone(o.document)):Promise.resolve(!0)).then(function(){return renderWindow(a,e,i,l,c)})})}function renderWindow(t,n,o,e,a){var r=n.contentWindow,i=new Support(r.document),l=new ImageLoader(o,i),c=getBounds(t),d="view"===o.type?e:documentWidth(r.document),u="view"===o.type?a:documentHeight(r.document),h=new o.renderer(d,u,l,o,document);return new NodeParser(t,h,i,l,o).ready.then(function(){var e;return log("Finished rendering"),e="view"===o.type?crop(h.canvas,{width:h.canvas.width,height:h.canvas.height,top:0,left:0,x:0,y:0}):t===r.document.body||t===r.document.documentElement||null!=o.canvas?h.canvas:crop(h.canvas,{width:null!=o.width?o.width:c.width,height:null!=o.height?o.height:c.height,top:c.top,left:c.left,x:r.pageXOffset,y:r.pageYOffset}),cleanupContainer(n,o),e})}function cleanupContainer(e,t){t.removeContainer&&(e.parentNode.removeChild(e),log("Cleaned up container"))}function crop(e,t){var n=document.createElement("canvas"),o=Math.min(e.width-1,Math.max(0,t.left)),a=Math.min(e.width,Math.max(1,t.left+t.width)),r=Math.min(e.height-1,Math.max(0,t.top)),i=Math.min(e.height,Math.max(1,t.top+t.height));return n.width=t.width,n.height=t.height,log("Cropping canvas at:","left:",t.left,"top:",t.top,"width:",a-o,"height:",i-r),log("Resulting crop with width",t.width,"and height",t.height," with x",o,"and y",r),n.getContext("2d").drawImage(e,o,r,a-o,i-r,t.x,t.y,a-o,i-r),n}function documentWidth(e){return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function documentHeight(e){return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function smallImage(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}function isIE9(){return document.documentMode&&document.documentMode<=9}function cloneNodeIE9(e,t){for(var n=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),o=e.firstChild;o;)!0!==t&&1===o.nodeType&&"SCRIPT"===o.nodeName||n.appendChild(cloneNodeIE9(o,t)),o=o.nextSibling;return n}function createWindowClone(o,e,t,n,a,r,i){labelCanvasElements(o);var l=isIE9()?cloneNodeIE9(o.documentElement,a.javascriptEnabled):o.documentElement.cloneNode(!0),c=e.createElement("iframe");return c.className="html2canvas-container",c.style.visibility="hidden",c.style.position="fixed",c.style.left="-10000px",c.style.top="0px",c.style.border="0",c.width=t,c.height=n,c.scrolling="no",e.body.appendChild(c),new Promise(function(t){var n=c.contentWindow.document;cloneNodeValues(o.documentElement,l,"textarea"),cloneNodeValues(o.documentElement,l,"select"),c.contentWindow.onload=c.onload=function(){var e=setInterval(function(){0<n.body.childNodes.length&&(cloneCanvasContents(o,n),clearInterval(e),"view"===a.type&&c.contentWindow.scrollTo(r,i),t(c))},50)},n.open(),n.write("<!DOCTYPE html><html></html>"),restoreOwnerScroll(o,r,i),n.replaceChild(!0===a.javascriptEnabled?n.adoptNode(l):removeScriptNodes(n.adoptNode(l)),n.documentElement),n.close()})}function cloneNodeValues(e,t,n){for(var o=e.getElementsByTagName(n),a=t.getElementsByTagName(n),r=o.length,i=0;i<r;i++)a[i].value=o[i].value}function restoreOwnerScroll(e,t,n){!e.defaultView||t===e.defaultView.pageXOffset&&n===e.defaultView.pageYOffset||e.defaultView.scrollTo(t,n)}function loadUrlDocument(e,t,n,o,a,r){return new Proxy(e,t,window.document).then(documentFromHTML(e)).then(function(e){return createWindowClone(e,n,o,a,r,0,0)})}function documentFromHTML(r){return function(t){var n,e=new DOMParser;try{n=e.parseFromString(t,"text/html")}catch(e){log("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(t),n.close()}catch(e){log("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=t}}var o=n.querySelector("base");if(!o||!o.href.host){var a=n.createElement("base");a.href=r,n.head.insertBefore(a,n.head.firstChild)}return n}}function labelCanvasElements(e){[].slice.call(e.querySelectorAll("canvas"),0).forEach(function(e){e.setAttribute(html2canvasCanvasCloneAttribute,"canvas-"+html2canvasCanvasCloneIndex++)})}function cloneCanvasContents(e,n){[].slice.call(e.querySelectorAll("["+html2canvasCanvasCloneAttribute+"]"),0).forEach(function(t){try{var e=n.querySelector("["+html2canvasCanvasCloneAttribute+'="'+t.getAttribute(html2canvasCanvasCloneAttribute)+'"]');e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(e){log("Unable to copy canvas content from",t,e)}t.removeAttribute(html2canvasCanvasCloneAttribute)})}function removeScriptNodes(t){return[].slice.call(t.childNodes,0).filter(isElementNode).forEach(function(e){"SCRIPT"===e.tagName?t.removeChild(e):removeScriptNodes(e)}),t}function isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}function absoluteUrl(e){var t=document.createElement("a");return t.href=e,t.href=t.href,t}window.html2canvas=function(e,t){var n=html2canvasCloneIndex++;if((t=t||{}).logging&&(window.html2canvas.logging=!0,window.html2canvas.start=Date.now()),t.async=void 0===t.async||t.async,t.allowTaint=void 0!==t.allowTaint&&t.allowTaint,t.removeContainer=void 0===t.removeContainer||t.removeContainer,t.javascriptEnabled=void 0!==t.javascriptEnabled&&t.javascriptEnabled,t.imageTimeout=void 0===t.imageTimeout?1e4:t.imageTimeout,t.renderer="function"==typeof t.renderer?t.renderer:CanvasRenderer,t.strict=!!t.strict,"string"==typeof e){if("string"!=typeof t.proxy)return Promise.reject("Proxy must be used when rendering url");var o=null!=t.width?t.width:window.innerWidth,a=null!=t.height?t.height:window.innerHeight;return loadUrlDocument(absoluteUrl(e),t.proxy,document,o,a,t).then(function(e){return renderWindow(e.contentWindow.document.documentElement,e,t,o,a)})}var r=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return r.setAttribute(html2canvasNodeAttribute+n,n),renderDocument(r.ownerDocument,t,r.ownerDocument.defaultView.innerWidth,r.ownerDocument.defaultView.innerHeight,n).then(function(e){return"function"==typeof t.onrendered&&(log("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),t.onrendered(e)),e})},window.html2canvas.punycode=this.punycode,window.html2canvas.proxy={};