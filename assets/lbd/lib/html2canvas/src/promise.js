(function(){function s(t,n){A[g]=t,A[g+1]=n,2===(g+=2)&&r()}function f(t){return"function"==typeof t}function t(){for(var t=0;t<g;t+=2)(0,A[t])(A[t+1]),A[t]=void 0,A[t+1]=void 0;g=0}function c(){}function a(t,n){if(t===n)l(t,new TypeError("You cannot resolve a promise with itself"));else if("function"==typeof n||"object"==typeof n&&null!==n)if(n.constructor===t.constructor)!function(n,t){1===t.a?h(n,t.b):2===n.a?l(n,t.b):u(t,void 0,function(t){a(n,t)},function(t){l(n,t)})}(t,n);else{var o;try{o=n.then}catch(t){E.error=t,o=E}o===E?l(t,E.error):void 0===o?h(t,n):f(o)?function(t,e,i){s(function(n){var o=!1,t=function(t,n,o,e){try{t.call(n,o,e)}catch(t){return t}}(i,e,function(t){o||(o=!0,e!==t?a(n,t):h(n,t))},function(t){o||(o=!0,l(n,t))});!o&&t&&(o=!0,l(n,t))},t)}(t,n,o):h(t,n)}else h(t,n)}function o(t){t.f&&t.f(t.b),p(t)}function h(t,n){void 0===t.a&&(t.b=n,t.a=1,0!==t.e.length&&s(p,t))}function l(t,n){void 0===t.a&&(t.a=2,t.b=n,s(o,t))}function u(t,n,o,e){var i=t.e,r=i.length;t.f=null,i[r]=n,i[r+1]=o,i[r+2]=e,0===r&&t.a&&s(p,t)}function p(t){var n=t.e,o=t.a;if(0!==n.length){for(var e,i,r=t.b,s=0;s<n.length;s+=3)e=n[s],i=n[s+o],e?d(o,e,i,r):i(r);t.e.length=0}}function n(){this.error=null}function d(t,n,o,e){var i,r,s,c,u=f(o);if(u){try{i=o(e)}catch(t){T.error=t,i=T}if(i===T?(c=!0,r=i.error,i=null):s=!0,n===i)return void l(n,new TypeError("A promises callback cannot return that same promise."))}else i=e,s=!0;void 0===n.a&&(u&&s?a(n,i):c?l(n,r):1===t?h(n,i):2===t&&l(n,i))}function e(t,n,o,e){this.n=t,this.c=new t(c,e),this.i=o,this.o(n)?(this.m=n,this.d=this.length=n.length,this.l(),0===this.length?h(this.c,this.b):(this.length=this.length||0,this.k(),0===this.d&&h(this.c,this.b))):l(this.c,this.p())}function i(t){if(0,this.b=this.a=void 0,this.e=[],c!==t){if(!f(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof i))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");!function(n,t){try{t(function(t){a(n,t)},function(t){l(n,t)})}catch(t){l(n,t)}}(this,t)}}var r,v,y,w,m,b=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},g=0,P=(j="undefined"!=typeof window?window:{}).MutationObserver||j.WebKitMutationObserver,j="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,A=Array(1e3);r="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?function(){process.nextTick(t)}:P?(y=0,w=new P(t),m=document.createTextNode(""),w.observe(m,{characterData:!0}),function(){m.data=y=++y%2}):j?((v=new MessageChannel).port1.onmessage=t,function(){v.port2.postMessage(0)}):function(){setTimeout(t,1)};var E=new n,T=new n;e.prototype.o=function(t){return b(t)},e.prototype.p=function(){return Error("Array Methods must be provided an Array")},e.prototype.l=function(){this.b=Array(this.length)},e.prototype.k=function(){for(var t=this.length,n=this.c,o=this.m,e=0;void 0===n.a&&e<t;e++)this.j(o[e],e)},e.prototype.j=function(t,n){var o=this.n;"object"==typeof t&&null!==t?t.constructor===o&&void 0!==t.a?(t.f=null,this.g(t.a,n,t.b)):this.q(o.resolve(t),n):(this.d--,this.b[n]=this.h(t))},e.prototype.g=function(t,n,o){var e=this.c;void 0===e.a&&(this.d--,this.i&&2===t?l(e,o):this.b[n]=this.h(o)),0===this.d&&h(e,this.b)},e.prototype.h=function(t){return t},e.prototype.q=function(t,n){var o=this;u(t,void 0,function(t){o.g(1,n,t)},function(t){o.g(2,n,t)})};i.all=function(t,n){return new e(this,t,!0,n).c},i.race=function(t,n){function o(t){a(i,t)}function e(t){l(i,t)}var i=new this(c,n);if(!b(t))return l(i,new TypeError("You must pass an array to race.")),i;for(var r=t.length,s=0;void 0===i.a&&s<r;s++)u(this.resolve(t[s]),void 0,o,e);return i},i.resolve=function(t,n){if(t&&"object"==typeof t&&t.constructor===this)return t;var o=new this(c,n);return a(o,t),o},i.reject=function(t,n){var o=new this(c,n);return l(o,t),o},i.prototype={constructor:i,then:function(t,n){var o=this.a;if(1===o&&!t||2===o&&!n)return this;var e=new this.constructor(c),i=this.b;if(o){var r=arguments[o-1];s(function(){d(o,e,r,i)})}else u(this,e,t,n);return e},catch:function(t){return this.then(null,t)}};var M={Promise:i,polyfill:function(){var t,n;"Promise"in(t="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self)&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&(new t.Promise(function(t){n=t}),f(n))||(t.Promise=i)}};"function"==typeof define&&define.amd?define(function(){return M}):"undefined"!=typeof module&&module.exports?module.exports=M:void 0!==this&&(this.ES6Promise=M)}).call(window),window&&window.ES6Promise.polyfill();