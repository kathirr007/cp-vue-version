tinymce.PluginManager.add("directionality",function(r){function t(e){var i,n=r.dom,t=r.selection.getSelectedBlocks();t.length&&(i=n.getAttrib(t[0],"dir"),tinymce.each(t,function(t){n.getParent(t.parentNode,"*[dir='"+e+"']",n.getRoot())||(i!=e?n.setAttrib(t,"dir",e):n.setAttrib(t,"dir",null))}),r.nodeChanged())}function e(e){var i=[];return tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(t){i.push(t+"[dir="+e+"]")}),i.join(",")}r.addCommand("mceDirectionLTR",function(){t("ltr")}),r.addCommand("mceDirectionRTL",function(){t("rtl")}),r.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:e("ltr")}),r.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:e("rtl")})});