tinymce.PluginManager.add("tabfocus",function(u){function e(e){9!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()}function t(n){function e(e){function t(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&tinymce.get(n.id)&&-1!=e.tabIndex&&function e(t){return"BODY"===t.nodeName||"hidden"!=t.type&&"none"!=t.style.display&&"hidden"!=t.style.visibility&&e(t.parentNode)}(e)}if(o=c.select(":input:enabled,*[tabindex]:not(iframe)"),d(o,function(e,t){return e.id==u.id?(i=t,!1):void 0}),0<e){for(a=i+1;a<o.length;a++)if(t(o[a]))return o[a]}else for(a=i-1;0<=a;a--)if(t(o[a]))return o[a];return null}var i,o,t,a;if(!(9!==n.keyCode||n.ctrlKey||n.altKey||n.metaKey||n.isDefaultPrevented())&&(1==(t=y(u.getParam("tab_focus",u.getParam("tabfocus_elements",":prev,:next")))).length&&(t[1]=t[0],t[0]=":prev"),o=n.shiftKey?":prev"==t[0]?e(-1):c.get(t[0]):":next"==t[1]?e(1):c.get(t[1]))){var r=tinymce.get(o.id||o.name);o.id&&r?r.focus():window.setTimeout(function(){tinymce.Env.webkit||window.focus(),o.focus()},10),n.preventDefault()}}var c=tinymce.DOM,d=tinymce.each,y=tinymce.explode;u.on("init",function(){u.inline&&tinymce.DOM.setAttrib(u.getBody(),"tabIndex",null),u.on("keyup",e),tinymce.Env.gecko?u.on("keypress keydown",t):u.on("keydown",t)})});