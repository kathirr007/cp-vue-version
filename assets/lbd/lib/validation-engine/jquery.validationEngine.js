!function(C){"use strict";var F={init:function(e){var a=this;return a.data("jqv")&&null!=a.data("jqv")||(e=F._saveOptions(a,e),C("body").on("click",".formError",function(){C(this).fadeOut(150,function(){C(this).parent(".formErrorOuter").remove(),C(this).remove()})})),this},attach:function(e){if(!C(this).is("form"))return alert("Sorry, jqv.attach() only applies to a form"),this;var a,r=this;return(a=e?F._saveOptions(r,e):r.data("jqv")).validateAttribute=r.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",a.binded&&(r.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").not("[type=radio]").not(".datepicker").bind(a.validationEventTrigger,F._onFieldEvent),r.find("["+a.validateAttribute+"*=validate][type=checkbox],["+a.validateAttribute+"*=validate][type=radio]").bind("click",F._onFieldEvent),r.find("["+a.validateAttribute+"*=validate][class*=datepicker]").bind(a.validationEventTrigger,{delay:300},F._onFieldEvent)),a.autoPositionUpdate&&C(window).bind("resize",{noAnimation:!0,formElem:r},F.updatePromptsPosition),r.bind("submit",F._onSubmitEvent),this},detach:function(){if(!C(this).is("form"))return alert("Sorry, jqv.detach() only applies to a form"),this;var e=this,a=e.data("jqv");return e.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").unbind(a.validationEventTrigger,F._onFieldEvent),e.find("["+a.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").unbind("click",F._onFieldEvent),e.unbind("submit",F.onAjaxFormComplete),e.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").off(a.validationEventTrigger,F._onFieldEvent),e.find("["+a.validateAttribute+"*=validate][type=checkbox]").off("click",F._onFieldEvent),e.off("submit",F.onAjaxFormComplete),e.removeData("jqv"),a.autoPositionUpdate&&C(window).unbind("resize",F.updatePromptsPosition),this},validate:function(){var e=C(this),a=null;if(e.is("form")&&!e.hasClass("validating")){e.addClass("validating");var r=e.data("jqv");a=F._validateFields(this),setTimeout(function(){e.removeClass("validating")},100),a&&r.onFormSuccess?r.onFormSuccess():!a&&r.onFormFailure&&r.onFormFailure()}else if(e.is("form"))e.removeClass("validating");else{r=e.closest("form").data("jqv");(a=F._validateField(e,r))&&r.onFieldSuccess?r.onFieldSuccess():r.onFieldFailure&&0<r.InvalidFields.length&&r.onFieldFailure()}return a},updatePromptsPosition:function(e){if(e&&this==window)var t=e.data.formElem,i=e.data.noAnimation;else t=C(this.closest("form"));var o=t.data("jqv");return t.find("["+o.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=C(this);o.prettySelect&&e.is(":hidden")&&(e=t.find("#"+o.usePrefix+e.attr("id")+o.useSuffix));var a=F._getPrompt(e),r=C(a).find(".formErrorContent").html();a&&F._updatePrompt(e,C(a),r,void 0,!1,o,i)}),this},showPrompt:function(e,a,r,t){var i=this.closest("form").data("jqv");return i||(i=F._saveOptions(this,i)),r&&(i.promptPosition=r),i.showArrow=1==t,F._showPrompt(this,e,a,!1,i),this},hide:function(){var e,a=C(this).closest("form").data("jqv"),r=a&&a.fadeDuration?a.fadeDuration:.3;return e=C(this).is("form")?"parentForm"+F._getClassName(C(this).attr("id")):F._getClassName(C(this).attr("id"))+"formError",C("."+e).fadeTo(r,.3,function(){C(this).parent(".formErrorOuter").remove(),C(this).remove()}),this},hideAll:function(){var e=this.data("jqv"),a=e?e.fadeDuration:.3;return C(".formError").fadeTo(a,.3,function(){C(this).parent(".formErrorOuter").remove(),C(this).remove()}),this},_onFieldEvent:function(e){var a=C(this),r=a.closest("form").data("jqv");r.eventTrigger="field",window.setTimeout(function(){F._validateField(a,r),0==r.InvalidFields.length&&r.onFieldSuccess?r.onFieldSuccess():0<r.InvalidFields.length&&r.onFieldFailure&&r.onFieldFailure()},e.data?e.data.delay:0)},_onSubmitEvent:function(){var e=C(this),a=e.data("jqv");a.eventTrigger="submit";var r=F._validateFields(e);return r&&a.ajaxFormValidation?(F._validateFormWithAjax(e,a),!1):a.onValidationComplete?!!a.onValidationComplete(e,r):r},_checkAjaxStatus:function(e){var r=!0;return C.each(e.ajaxValidCache,function(e,a){if(!a)return r=!1}),r},_checkAjaxFieldStatus:function(e,a){return 1==a.ajaxValidCache[e]},_validateFields:function(r){var t=r.data("jqv"),i=!1;r.trigger("jqv.form.validating");var o=null;if(r.find("["+t.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=C(this),a=[];if(C.inArray(e.attr("name"),a)<0){if((i|=F._validateField(e,t))&&null==o&&(o=e.is(":hidden")&&t.prettySelect?e=r.find("#"+t.usePrefix+F._jqSelector(e.attr("id"))+t.useSuffix):e),t.doNotShowAllErrosOnSubmit)return!1;if(a.push(e.attr("name")),1==t.showOneMessage&&i)return!1}}),r.trigger("jqv.form.result",[i]),i){if(t.scroll){var e=o.offset().top,a=o.offset().left,s=t.promptPosition;if("string"==typeof s&&-1!=s.indexOf(":")&&(s=s.substring(0,s.indexOf(":"))),"bottomRight"!=s&&"bottomLeft"!=s){var n=F._getPrompt(o);n&&(e=n.offset().top)}if(t.isOverflown){var l=C(t.overflownDIV);if(!l.length)return!1;e+=l.scrollTop()+-parseInt(l.offset().top)-5,C(t.overflownDIV+":not(:animated)").animate({scrollTop:e},1100,function(){t.focusFirstField&&o.focus()})}else C("body,html").stop().animate({scrollTop:e,scrollLeft:a},1100,function(){t.focusFirstField&&o.focus()})}else t.focusFirstField&&o.focus();return!1}return!0},_validateFormWithAjax:function(l,d){var e=l.serialize(),a=d.ajaxmethod?d.ajaxmethod:"GET",r=d.ajaxFormValidationURL?d.ajaxFormValidationURL:l.attr("action"),u=d.dataType?d.dataType:"json";C.ajax({type:a,url:r,cache:!1,dataType:u,data:e,form:l,methods:F,options:d,beforeSend:function(){return d.onBeforeAjaxFormValidation(l,d)},error:function(e,a){F._ajaxError(e,a)},success:function(e){if("json"==u&&!0!==e){for(var a=!1,r=0;r<e.length;r++){var t=e[r],i=t[0],o=C(C("#"+i)[0]);if(1==o.length){var s=t[2];if(1==t[1])if(""!=s&&s){if(d.allrules[s])(n=d.allrules[s].alertTextOk)&&(s=n);F._showPrompt(o,s,"pass",!1,d,!0)}else F._closePrompt(o);else{var n;if(a|=!0,d.allrules[s])(n=d.allrules[s].alertText)&&(s=n);F._showPrompt(o,s,"",!1,d,!0)}}}d.onAjaxFormComplete(!a,l,e,d)}else d.onAjaxFormComplete(!0,l,e,d)}})},_validateField:function(e,a,r){if(e.attr("id")||(e.attr("id","form-validation-field-"+C.validationEngine.fieldIdCounter),++C.validationEngine.fieldIdCounter),e.is(":hidden")&&!a.prettySelect||e.parent().is(":hidden"))return!1;var t=e.attr(a.validateAttribute),i=/validate\[(.*)\]/.exec(t);if(!i)return!1;var o=i[1].split(/\[|,|\]/),s=e.attr("name"),n=e.attr("id"),l="",d="",u=!1,c=!1;a.isError=!1,a.showArrow=!0,0<a.maxErrorsPerField&&(c=!0);var f=C(e.closest("form"));for(var v in o)o[v]=o[v].replace(" ",""),""===o[v]&&delete o[v];v=0;for(var m=0;v<o.length;v++){if(c&&m>=a.maxErrorsPerField){if(!u){var p=C.inArray("required",o);u=-1!=p&&v<=p}break}var g=void 0;switch(o[v]){case"required":u=!0,g=F._getErrorMessage(f,e,o[v],o,v,a,F._required);break;case"custom":g=F._getErrorMessage(f,e,o[v],o,v,a,F._custom);break;case"groupRequired":var x="["+a.validateAttribute+"*="+o[v+1]+"]",h=f.find(x).eq(0);if(h[0]!=e[0]){F._validateField(h,a,r),a.showArrow=!0;continue}(g=F._getErrorMessage(f,e,o[v],o,v,a,F._groupRequired))&&(u=!0),a.showArrow=!1;break;case"ajax":(g=F._ajax(e,o,v,a))&&(d="load");break;case"minSize":g=F._getErrorMessage(f,e,o[v],o,v,a,F._minSize);break;case"maxSize":g=F._getErrorMessage(f,e,o[v],o,v,a,F._maxSize);break;case"min":g=F._getErrorMessage(f,e,o[v],o,v,a,F._min);break;case"max":g=F._getErrorMessage(f,e,o[v],o,v,a,F._max);break;case"minWriters":g=F._getErrorMessage(f,e,o[v],o,v,a,F._minWriters);break;case"maxWriters":g=F._getErrorMessage(f,e,o[v],o,v,a,F._maxWriters);break;case"past":g=F._getErrorMessage(f,e,o[v],o,v,a,F._past);break;case"future":g=F._getErrorMessage(f,e,o[v],o,v,a,F._future);break;case"priceRange":g=F._getErrorMessage(f,e,o[v],o,v,a,F._priceRange);break;case"dateRange":x="["+a.validateAttribute+"*="+o[v+1]+"]";a.firstOfGroup=f.find(x).eq(0),a.secondOfGroup=f.find(x).eq(1),(a.firstOfGroup[0].value||a.secondOfGroup[0].value)&&(g=F._getErrorMessage(f,e,o[v],o,v,a,F._dateRange)),g&&(u=!0),a.showArrow=!1;break;case"dateTimeRange":x="["+a.validateAttribute+"*="+o[v+1]+"]";a.firstOfGroup=f.find(x).eq(0),a.secondOfGroup=f.find(x).eq(1),(a.firstOfGroup[0].value||a.secondOfGroup[0].value)&&(g=F._getErrorMessage(f,e,o[v],o,v,a,F._dateTimeRange)),g&&(u=!0),a.showArrow=!1;break;case"maxCheckbox":e=C(f.find("input[name='"+s+"']")),g=F._getErrorMessage(f,e,o[v],o,v,a,F._maxCheckbox);break;case"minCheckbox":e=C(f.find("input[name='"+s+"']")),g=F._getErrorMessage(f,e,o[v],o,v,a,F._minCheckbox);break;case"equals":g=F._getErrorMessage(f,e,o[v],o,v,a,F._equals);break;case"notequals":g=F._getErrorMessage(f,e,o[v],o,v,a,F._notequals);break;case"funcCall":g=F._getErrorMessage(f,e,o[v],o,v,a,F._funcCall);break;case"creditCard":g=F._getErrorMessage(f,e,o[v],o,v,a,F._creditCard);break;case"condRequired":void 0!==(g=F._getErrorMessage(f,e,o[v],o,v,a,F._condRequired))&&(u=!0);break;case"nbblogRange":e=C(f.find("input[id='"+n+"']")),g=F._getErrorMessage(f,e,o[v],o,v,a,F._nbblogRange);break;case"nbnewsRange":e=C(f.find("input[id='"+n+"']")),g=F._getErrorMessage(f,e,o[v],o,v,a,F._nbnewsRange);break;case"nbdescRange":e=C(f.find("input[id='"+n+"']")),g=F._getErrorMessage(f,e,o[v],o,v,a,F._nbdescRange);break;case"nbguideRange":e=C(f.find("input[id='"+n+"']")),g=F._getErrorMessage(f,e,o[v],o,v,a,F._nbguideRange)}var _=!1;if("object"==typeof g)switch(g.status){case"_break":_=!0;break;case"_error":g=g.message;break;case"_error_no_prompt":return!0}if(_)break;"string"==typeof g&&(l+=g+"<br/>",a.isError=!0,m++)}!u&&e.val().length<1&&(a.isError=!1);var b=e.prop("type");("radio"==b||"checkbox"==b)&&1<f.find("input[name='"+s+"']").size()&&(e=C(f.find("input[name='"+s+"'][type!=hidden]:first")),a.showArrow=!1),e.is(":hidden")&&a.prettySelect&&(e=f.find("#"+a.usePrefix+F._jqSelector(e.attr("id"))+a.useSuffix)),a.isError?F._showPrompt(e,l,d,!1,a):F._closePrompt(e),e.trigger("jqv.field.result",[e,a.isError,l]);var T=C.inArray(e[0],a.InvalidFields);return-1==T?a.isError&&a.InvalidFields.push(e[0]):a.isError||a.InvalidFields.splice(T,1),F._handleStatusCssClasses(e,a),a.isError},_handleStatusCssClasses:function(e,a){a.addSuccessCssClassToField&&e.removeClass(a.addSuccessCssClassToField),a.addFailureCssClassToField&&e.removeClass(a.addFailureCssClassToField),a.addSuccessCssClassToField&&!a.isError&&e.addClass(a.addSuccessCssClassToField),a.addFailureCssClassToField&&a.isError&&e.addClass(a.addFailureCssClassToField)},_getErrorMessage:function(e,a,r,t,i,o,s){var n=r;"custom"==r&&(r="custom["+t[jQuery.inArray(r,t)+1]+"]");var l,d=(a.attr("data-validation-engine")?a.attr("data-validation-engine"):a.attr("class")).split(" ");if(null!=(l="future"==r||"past"==r||"maxCheckbox"==r||"minCheckbox"==r||"priceRange"==r?s(e,a,t,i,o):s(a,t,i,o))){var u=F._getCustomErrorMessage(C(a),d,n,o);u&&(l=u)}return l},_getCustomErrorMessage:function(e,a,r,t){var i=!1,o=F._validityProp[r];if(null!=o&&null!=(i=e.attr("data-errormessage-"+o)))return i;if(null!=(i=e.attr("data-errormessage")))return i;var s="#"+e.attr("id");if(void 0!==t.custom_error_messages[s]&&void 0!==t.custom_error_messages[s][r])i=t.custom_error_messages[s][r].message;else if(0<a.length)for(var n=0;n<a.length&&0<a.length;n++){var l="."+a[n];if(void 0!==t.custom_error_messages[l]&&void 0!==t.custom_error_messages[l][r]){i=t.custom_error_messages[l][r].message;break}}return i||void 0===t.custom_error_messages[r]||void 0===t.custom_error_messages[r].message||(i=t.custom_error_messages[r].message),i},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",notequals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing",nbblogRange:"pattern-mismatch",nbnewsRange:"pattern-mismatch",nbdescRange:"pattern-mismatch",nbguideRange:"pattern-mismatch"},_required:function(e,a,r,t){switch(e.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:if(!C.trim(e.val())||e.val()==e.attr("data-validation-placeholder")||e.val()==e.attr("placeholder"))return t.allrules[a[r]].alertText;break;case"radio":case"checkbox":var i=e.closest("form"),o=e.attr("name");if(0==i.find("input[name='"+o+"']:checked").size())return 1==i.find("input[name='"+o+"']:visible").size()?t.allrules[a[r]].alertTextCheckboxe:t.allrules[a[r]].alertTextCheckboxMultiple}},_groupRequired:function(e,a,r,t){var i="["+t.validateAttribute+"*="+a[r+1]+"]",o=!1;if(e.closest("form").find(i).each(function(){if(!F._required(C(this),a,r,t))return!(o=!0)}),!o)return t.allrules[a[r]].alertText},_custom:function(e,a,r,t){var i,o=a[r+1],s=t.allrules[o];if(s)if(s.regex){var n=s.regex;if(!n)return void alert("jqv:custom regex not found - "+o);if(!new RegExp(n).test(e.val()))return t.allrules[o].alertText}else{if(!s.func)return void alert("jqv:custom type not allowed "+o);if("function"!=typeof(i=s.func))return void alert("jqv:custom parameter 'function' is no function - "+o);if(!i(e,a,r,t))return t.allrules[o].alertText}else alert("jqv:custom rule not found - "+o)},_funcCall:function(e,a,r,t){var i,o=a[r+1];if(-1<o.indexOf(".")){for(var s=o.split("."),n=window;s.length;)n=n[s.shift()];i=n}else i=window[o]||t.customFunctions[o];if("function"==typeof i)return i(e,a,r,t)},_equals:function(e,a,r,t){var i=a[r+1];if(e.val()!=C("#"+i).val())return t.allrules.equals.alertText},_notequals:function(r,e,t,i){var a=e[t+1];C("."+a).each(function(e,a){if(r.val()==C(this).val()&&e!=t)return i.allrules.equals.alertText})},_maxSize:function(e,a,r,t){var i=a[r+1];if(i<e.val().length){var o=t.allrules.maxSize;return o.alertText+i+o.alertText2}},_minSize:function(e,a,r,t){var i=a[r+1];if(e.val().length<i){var o=t.allrules.minSize;return o.alertText+i+o.alertText2}},_min:function(e,a,r,t){var i=parseFloat(a[r+1]),o=e.val().replace(",",".");if(parseFloat(o)<i){var s=t.allrules.min;return s.alertText2?s.alertText+i+s.alertText2:s.alertText+i}},_max:function(e,a,r,t){var i=parseFloat(a[r+1]),o=e.val().replace(",",".");if(i<parseFloat(o)){var s=t.allrules.max;return s.alertText2?s.alertText+i+s.alertText2:s.alertText+i}},_minWriters:function(e,a,r,t){var i=parseFloat(a[r+1]),o=e.val().replace(",",".");if(parseFloat(o)<i){var s=t.allrules.minWriters;return s.alertText2?s.alertText+i+s.alertText2:s.alertText+i}},_maxWriters:function(e,a,r,t){var i=parseFloat(a[r+1]);if(i<parseFloat(e.val())){var o=t.allrules.maxWriters;return o.alertText2?o.alertText+i+o.alertText2:o.alertText+i}},_past:function(e,a,r,t,i){var o,s=r[t+1],n=C(e.find("input[name='"+s.replace(/^#+/,"")+"']"));if("now"==s.toLowerCase())o=new Date;else if(null!=n.val()){if(n.is(":disabled"))return;o=F._parseDate(n.val())}else o=F._parseDate(s);if(o<F._parseDate(a.val())){var l=i.allrules.past;return l.alertText2?l.alertText+F._dateToString(o)+l.alertText2:l.alertText+F._dateToString(o)}},_future:function(e,a,r,t,i){var o,s=r[t+1],n=C(e.find("input[name='"+s.replace(/^#+/,"")+"']"));if("now"==s.toLowerCase())o=new Date;else if(null!=n.val()){if(n.is(":disabled"))return;o=F._parseDate(n.val())}else o=F._parseDate(s);if(F._parseDate(a.val())<o){var l=i.allrules.future;return l.alertText2?l.alertText+F._dateToString(o)+l.alertText2:l.alertText+F._dateToString(o)}},_priceRange:function(e,a,r,t,i){var o,s=r[t+1],n=C(e.find("input[id='"+s.replace(/^#+/,"")+"']"));if(null!=n.val()){if(n.is(":disabled"))return;o=parseFloat(n.val())}if(o<parseFloat(a.val()))return i.allrules.priceRange.alertText},_isDate:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(e)},_isDateTime:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(e)},_dateCompare:function(e,a){return new Date(e.toString())<new Date(a.toString())},_dateRange:function(e,a,r,t){return!t.firstOfGroup[0].value&&t.secondOfGroup[0].value||t.firstOfGroup[0].value&&!t.secondOfGroup[0].value?t.allrules[a[r]].alertText+t.allrules[a[r]].alertText2:F._isDate(t.firstOfGroup[0].value)&&F._isDate(t.secondOfGroup[0].value)&&F._dateCompare(t.firstOfGroup[0].value,t.secondOfGroup[0].value)?void 0:t.allrules[a[r]].alertText+t.allrules[a[r]].alertText2},_dateTimeRange:function(e,a,r,t){return!t.firstOfGroup[0].value&&t.secondOfGroup[0].value||t.firstOfGroup[0].value&&!t.secondOfGroup[0].value?t.allrules[a[r]].alertText+t.allrules[a[r]].alertText2:F._isDateTime(t.firstOfGroup[0].value)&&F._isDateTime(t.secondOfGroup[0].value)&&F._dateCompare(t.firstOfGroup[0].value,t.secondOfGroup[0].value)?void 0:t.allrules[a[r]].alertText+t.allrules[a[r]].alertText2},_maxCheckbox:function(e,a,r,t,i){var o=r[t+1],s=a.attr("name");if(o<e.find("input[name='"+s+"']:checked").size())return i.showArrow=!1,i.allrules.maxCheckbox.alertText2?i.allrules.maxCheckbox.alertText+" "+o+" "+i.allrules.maxCheckbox.alertText2:i.allrules.maxCheckbox.alertText},_minCheckbox:function(e,a,r,t,i){var o=r[t+1],s=a.attr("name");if(e.find("input[name='"+s+"']:checked").size()<o)return i.showArrow=!1,i.allrules.minCheckbox.alertText+" "+o+" "+i.allrules.minCheckbox.alertText2},_nbblogRange:function(e,a,r,t){var i=e.val();if(i<200||500<i)return t.allrules.nbblogRange.alertText},_nbnewsRange:function(e,a,r,t){var i=e.val();if(i<50||200<i)return t.allrules.nbnewsRange.alertText},_nbdescRange:function(e,a,r,t){var i=e.val();if(i<40||150<i)return t.allrules.nbdescRange.alertText},_nbguideRange:function(e,a,r,t){var i=e.val();if(i<500||1500<i)return t.allrules.nbguideRange.alertText},_creditCard:function(e,a,r,t){var i=!1,o=e.val().replace(/ +/g,"").replace(/-+/g,""),s=o.length;if(14<=s&&s<=16&&0<parseInt(o)){for(var n,l=0,d=(r=s-1,1),u=new String;n=parseInt(o.charAt(r)),u+=d++%2==0?2*n:n,0<=--r;);for(r=0;r<u.length;r++)l+=parseInt(u.charAt(r));i=l%10==0}if(!i)return t.allrules.creditCard.alertText},_ajax:function(s,e,a,n){var r=e[a+1],l=n.allrules[r],t=l.extraData,i=l.extraDataDynamic,o={fieldId:s.attr("id"),fieldValue:s.val()};if("object"==typeof t)C.extend(o,t);else if("string"==typeof t){var d=t.split("&");for(a=0;a<d.length;a++){var u=d[a].split("=");u[0]&&u[0]&&(o[u[0]]=u[1])}}if(i){var c=String(i).split(",");for(a=0;a<c.length;a++){var f=c[a];if(C(f).length){var v=s.closest("form").find(f).val();f.replace("#",""),escape(v);o[f.replace("#","")]=v}}}if("field"==n.eventTrigger&&delete n.ajaxValidCache[s.attr("id")],!n.isError&&!F._checkAjaxFieldStatus(s.attr("id"),n))return C.ajax({type:n.ajaxFormValidationMethod,url:l.url,cache:!1,dataType:"json",data:o,field:s,rule:l,methods:F,options:n,beforeSend:function(){},error:function(e,a){F._ajaxError(e,a)},success:function(e){var a=e[0],r=C("#"+a).eq(0);if(1==r.length){var t=e[1],i=e[2];if(t){if(n.ajaxValidCache[a]=!0,i){if(n.allrules[i])(o=n.allrules[i].alertTextOk)&&(i=o)}else i=l.alertTextOk;i?F._showPrompt(r,i,"pass",!0,n):F._closePrompt(r),"submit"==n.eventTrigger&&s.closest("form").submit()}else{var o;if(n.ajaxValidCache[a]=!1,n.isError=!0,i){if(n.allrules[i])(o=n.allrules[i].alertText)&&(i=o)}else i=l.alertText;F._showPrompt(r,i,"",!0,n)}}r.trigger("jqv.field.result",[r,n.isError,i])}}),l.alertTextLoad},_ajaxError:function(e,a){0==e.status&&null==a?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+e.status+" "+a)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var a=e.split("-");return a==e&&(a=e.split("/")),new Date(a[0],a[1]-1,a[2])},_showPrompt:function(e,a,r,t,i,o){var s=F._getPrompt(e);o&&(s=!1),s?F._updatePrompt(e,s,a,r,t,i):F._buildPrompt(e,a,r,t,i)},_buildPrompt:function(e,a,r,t,i){var o=C("<div>");switch(o.addClass(F._getClassName(e.attr("id"))+"formError"),o.addClass("parentForm"+F._getClassName(e.parents("form").attr("id"))),o.addClass("formError"),r){case"pass":o.addClass("greenPopup");break;case"load":o.addClass("blackPopup")}t&&o.addClass("ajaxed");C("<div>").addClass("formErrorContent").html(a).appendTo(o);if(i.showArrow){var s=C("<div>").addClass("formErrorArrow"),n=e.data("promptPosition")||i.promptPosition;if("string"==typeof n)-1!=(l=n.indexOf(":"))&&(n=n.substring(0,l));switch(n){case"bottomLeft":case"bottomRight":o.find(".formErrorContent").before(s),s.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');break;case"topLeft":case"topRight":s.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),o.append(s)}}e.closest(".ui-dialog").length&&o.addClass("formErrorInsideDialog"),o.css({opacity:0,position:"absolute"}),e.before(o);var l=F._calculatePosition(e,o,i);return o.css({top:l.callerTopPosition,left:l.callerleftPosition,marginTop:l.marginTopSize,opacity:0}).data("callerField",e),i.autoHidePrompt&&setTimeout(function(){o.animate({opacity:0},function(){o.closest(".formErrorOuter").remove(),o.remove()})},i.autoHideDelay),o.animate({opacity:.87})},_updatePrompt:function(e,a,r,t,i,o,s){if(a){void 0!==t&&("pass"==t?a.addClass("greenPopup"):a.removeClass("greenPopup"),"load"==t?a.addClass("blackPopup"):a.removeClass("blackPopup")),i?a.addClass("ajaxed"):a.removeClass("ajaxed"),a.find(".formErrorContent").html(r);var n=F._calculatePosition(e,a,o),l={top:n.callerTopPosition,left:n.callerleftPosition,marginTop:n.marginTopSize};s?a.css(l):a.animate(l)}},_closePrompt:function(e){var a=F._getPrompt(e);a&&a.fadeTo("fast",0,function(){a.parent(".formErrorOuter").remove(),a.remove()})},closePrompt:function(e){return F._closePrompt(e)},_getPrompt:function(e){var a=C(e).closest("form").attr("id"),r=F._getClassName(e.attr("id"))+"formError",t=C("."+F._escapeExpression(r)+".parentForm"+a)[0];if(t)return C(t)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(e){var a=C(document),r=C("body"),t=e&&e.hasClass("rtl")||e&&"rtl"===(e.attr("dir")||"").toLowerCase()||a.hasClass("rtl")||"rtl"===(a.attr("dir")||"").toLowerCase()||r.hasClass("rtl")||"rtl"===(r.attr("dir")||"").toLowerCase();return Boolean(t)},_calculatePosition:function(e,a,r){var t,i,o,s=e.width(),n=e.position().left,l=e.position().top;e.height();t=i=0,o=-a.height();var d=e.data("promptPosition")||r.promptPosition,u="",c="",f=0,v=0;switch("string"==typeof d&&-1!=d.indexOf(":")&&(u=d.substring(d.indexOf(":")+1),d=d.substring(0,d.indexOf(":")),-1!=u.indexOf(",")&&(c=u.substring(u.indexOf(",")+1),u=u.substring(0,u.indexOf(",")),v=parseInt(c),isNaN(v)&&(v=0)),f=parseInt(u),isNaN(u)&&(u=0)),d){default:case"topRight":i+=n+s-30,t+=l;break;case"topLeft":t+=l,i+=n;break;case"centerRight":t=l+4,o=0,i=n+e.outerWidth(!0)+5;break;case"centerLeft":i=n-(a.width()+2),t=l+4,o=0;break;case"bottomLeft":t=l+e.height()+5,o=0,i=n;break;case"bottomRight":i=n+s-30,t=l+e.height()+5,o=0}return{callerTopPosition:(t+=v)+"px",callerleftPosition:(i+=f)+"px",marginTopSize:o+"px"}},_saveOptions:function(e,a){if(C.validationEngineLanguage)var r=C.validationEngineLanguage.allRules;else C.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");C.validationEngine.defaults.allrules=r;var t=C.extend(!0,{},C.validationEngine.defaults,a);return e.data("jqv",t),t},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,a,r,t){var i,o;for(i=r+1;i<a.length;i++)if((o=jQuery("#"+a[i]).first()).length&&null==F._required(o,["required"],0,t))return F._required(e,["required"],0,t)}};C.fn.validationEngine=function(e){var a=C(this);return a[0]?"string"==typeof e&&"_"!=e.charAt(0)&&F[e]?("showPrompt"!=e&&"hide"!=e&&"hideAll"!=e&&F.init.apply(a),F[e].apply(a,Array.prototype.slice.call(arguments,1))):"object"!=typeof e&&e?void C.error("Method "+e+" does not exist in jQuery.validationEngine"):(F.init.apply(a,arguments),F.attach.apply(a)):a},C.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:C.noop,onBeforeAjaxFormValidation:C.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onFormSuccess:!1,onFormFailure:!1,addSuccessCssClassToField:!1,addFailureCssClassToField:!1,autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:.3,prettySelect:!1,usePrefix:"",useSuffix:"",showOneMessage:!1}},C(function(){C.validationEngine.defaults.promptPosition=F.isRTL()?"topLeft":"topRight"})}(jQuery);