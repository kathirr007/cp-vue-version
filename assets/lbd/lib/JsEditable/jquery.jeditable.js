!function($){$.fn.editable=function(t,e){if("disable"!=t)if("enable"!=t){if("destroy"!=t){var r=$.extend({},$.fn.editable.defaults,{target:t},e),p=$.editable.types[r.type].plugin||function(){},u=$.editable.types[r.type].submit||function(){},c=$.editable.types[r.type].buttons||$.editable.types.defaults.buttons,h=$.editable.types[r.type].content||$.editable.types.defaults.content,y=$.editable.types[r.type].element||$.editable.types.defaults.element,f=$.editable.types[r.type].reset||$.editable.types.defaults.reset,b=r.callback||function(){},m=r.onedit||function(){},v=r.onsubmit||function(){},i=r.onreset||function(){},g=r.onerror||f;return r.tooltip&&$(this).attr("title",r.tooltip),r.autowidth="auto"==r.width,r.autoheight="auto"==r.height,this.each(function(){var o=this,a=$(o).width(),d=$(o).height();$(this).data("event.editable",r.event),$.trim($(this).html())||$(this).html(r.placeholder),$(this).bind(r.event,function(t){if(!0!==$(this).data("disabled.editable")&&!o.editing&&!1!==m.apply(this,[r,o])){t.preventDefault(),t.stopPropagation(),r.tooltip&&$(o).removeAttr("title"),0==$(o).width()?(r.width=a,r.height=d):("none"!=r.width&&(r.width=r.autowidth?$(o).width():r.width),"none"!=r.height&&(r.height=r.autoheight?$(o).height():r.height)),$(this).html().toLowerCase().replace(/(;|")/g,"")==r.placeholder.toLowerCase().replace(/(;|")/g,"")&&$(this).html(""),o.editing=!0,o.revert=$(o).html(),$(o).html("");var n=$("<form />");r.cssclass&&("inherit"==r.cssclass?n.attr("class",$(o).attr("class")):n.attr("class",r.cssclass)),r.style&&("inherit"==r.style?(n.attr("style",$(o).attr("style")),n.css("display",$(o).css("display"))):n.attr("style",r.style));var e,l=y.apply(n,[r,o]);if(r.loadurl){var s=setTimeout(function(){l.disabled=!0,h.apply(n,[r.loadtext,r,o])},100),i={};i[r.id]=o.id,$.isFunction(r.loaddata)?$.extend(i,r.loaddata.apply(o,[o.revert,r])):$.extend(i,r.loaddata),$.ajax({type:r.loadtype,url:r.loadurl,data:i,async:!1,success:function(t){window.clearTimeout(s),e=t,l.disabled=!1}})}else r.data?(e=r.data,$.isFunction(r.data)&&(e=r.data.apply(o,[o.revert,r]))):e=o.revert;h.apply(n,[e,r,o]),l.attr("name",r.name),c.apply(n,[r,o]),$(o).append(n),p.apply(n,[r,o]),$(":input:visible:enabled:first",n).focus(),r.select&&l.select(),l.keydown(function(t){27==t.keyCode&&(t.preventDefault(),f.apply(n,[r,o]))}),"cancel"==r.onblur?l.blur(function(t){s=setTimeout(function(){f.apply(n,[r,o])},500)}):"submit"==r.onblur?l.blur(function(t){s=setTimeout(function(){n.submit()},200)}):$.isFunction(r.onblur)?l.blur(function(t){r.onblur.apply(o,[l.val(),r])}):l.blur(function(t){}),n.submit(function(t){if(s&&clearTimeout(s),t.preventDefault(),!1!==v.apply(n,[r,o])&&!1!==u.apply(n,[r,o]))if($.isFunction(r.target)){var e=r.target.apply(o,[l.val(),r]);$(o).html(e),o.editing=!1,b.apply(o,[o.innerHTML,r]),$.trim($(o).html())||$(o).html(r.placeholder)}else{var i={};i[r.name]=l.val(),i[r.id]=o.id,$.isFunction(r.submitdata)?$.extend(i,r.submitdata.apply(o,[o.revert,r])):$.extend(i,r.submitdata),"PUT"==r.method&&(i._method="put"),$(o).html(r.indicator);var a={type:"POST",data:i,dataType:"html",url:r.target,success:function(t,e){"html"==a.dataType&&$(o).html(t),o.editing=!1,b.apply(o,[t,r]),$.trim($(o).html())||$(o).html(r.placeholder)},error:function(t,e,i){g.apply(n,[r,o,t])}};$.extend(a,r.ajaxoptions),$.ajax(a)}return $(o).attr("title",r.tooltip),!1})}}),this.reset=function(t){this.editing&&!1!==i.apply(t,[r,o])&&($(o).html(o.revert),o.editing=!1,$.trim($(o).html())||$(o).html(r.placeholder),r.tooltip&&$(o).attr("title",r.tooltip))}})}$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable")}else $(this).data("disabled.editable",!1);else $(this).data("disabled.editable",!0)},$.editable={types:{defaults:{element:function(t,e){var i=$('<input type="hidden"></input>');return $(this).append(i),i},content:function(t,e,i){$(":input:first",this).val(t)},reset:function(t,e){e.reset(this)},buttons:function(i,a){var n=this;if(i.submit){if(i.submit.match(/>$/))var t=$(i.submit).click(function(){"submit"!=t.attr("type")&&n.submit()});else(t=$('<button type="submit" />')).html(i.submit);$(this).append(t)}if(i.cancel){if(i.cancel.match(/>$/))var e=$(i.cancel);else(e=$('<button type="cancel" />')).html(i.cancel);$(this).append(e),$(e).click(function(t){if($.isFunction($.editable.types[i.type].reset))var e=$.editable.types[i.type].reset;else e=$.editable.types.defaults.reset;return e.apply(n,[i,a]),!1})}}},text:{element:function(t,e){var i=$("<input />");return"none"!=t.width&&i.width(t.width),"none"!=t.height&&i.height(t.height),i.attr("autocomplete","off"),$(this).append(i),i}},textarea:{element:function(t,e){var i=$("<textarea />");return t.rows?i.attr("rows",t.rows):"none"!=t.height&&i.height(t.height),t.cols?i.attr("cols",t.cols):"none"!=t.width&&i.width(t.width),$(this).append(i),i}},select:{element:function(t,e){var i=$("<select />");return $(this).append(i),i},content:function(data,settings,original){if(String==data.constructor)eval("var json = "+data);else var json=data;for(var key in json)if(json.hasOwnProperty(key)&&"selected"!=key){var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){$(this).val()!=json.selected&&$(this).text()!=$.trim(original.revert)||$(this).attr("selected","selected")})}}},addInputType:function(t,e){$.editable.types[t]=e}},$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}}(jQuery);