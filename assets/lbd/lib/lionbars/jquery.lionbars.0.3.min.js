!function(U){U.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()},U.fn.lionbars=function(i){function s(t,r){var l=U(t).get(0);k=void 0!==r?r.height:l.scrollHeight,q=void 0!==r?r.width:l.scrollWidth,E=l.clientHeight,D=l.clientWidth,A=l.offsetHeight,z=l.offsetWidth,function(t){var r=U(t);r.css({overflow:"auto"}),y=z-D-S-j,r.css({overflow:"hidden"})}(U(t)),function(t){var r=U(t);r.css({overflow:"auto"}),T=A-E-R-Q,r.css({overflow:"hidden"})}(U(t))}function a(t){var r=U(t);if(B=C=!1,function(t){var r=U(t);L=parseInt(r.css("padding-top").replace("px","")),X=parseInt(r.css("padding-left").replace("px","")),Y=parseInt(r.css("padding-bottom").replace("px","")),O=parseInt(r.css("padding-right").replace("px",""))}(r),function(t){var r=U(t);R=parseInt(r.css("border-top-width").replace("px","")),j=parseInt(r.css("border-right-width").replace("px","")),Q=parseInt(r.css("border-bottom-width").replace("px","")),S=parseInt(r.css("border-left-width").replace("px",""))}(r),r.css({overflow:"hidden"}),r.get(0).scrollHeight>r.get(0).clientHeight&&(C=!0),r.get(0).scrollWidth>r.get(0).clientWidth&&(B=!0),r.css({overflow:"auto"}),C||B)return!0}function o(t,r,l){var i=U(t);(r||l)&&(i.css({overflow:"hidden"}),function(t,r){var l=U(t),i=U(r);l.css({padding:0}),i.css({"padding-top":L+"px","padding-left":X+"px","padding-bottom":Y+"px","padding-right":O+"px"})}(i,i.find(".lb-wrap")),function(t){var r=U(t);r.css({width:r.width()+X+O,height:r.height()+L+Y})}(i),function(t,r){var l=U(t),i=U(r);l.css({position:"relative"}),i.css({width:l.width()+y-X-O,height:l.height()+T-L-Y})}(i,i.find(".lb-wrap")))}function d(t){var r=U(t);P=C&&B?(N=r.height()-12,r.width()-12):(N=r.height()-4,r.width()-4),r.find(".lb-v-scrollbar").css({height:N}),r.find(".lb-h-scrollbar").css({width:P})}function c(){C=B=!1,P=N=K=J=E=D=A=z=q=k=j=Q=S=R=O=Y=X=L=T=y=0}function h(t){var r,l,i,e=U(t);0!=e.find(".lb-v-scrollbar").length&&(r=20,i=A-e.find(".lb-v-scrollbar").height(),l=A-i-r,J=(J=Math.round(A*l/k))<r?r:J),0!=e.find(".lb-h-scrollbar").length&&(r=20,i=z-e.find(".lb-h-scrollbar").width(),l=z-i-r,K=(K=Math.round(z*l/q))<r?r:K),e.find(".lb-v-scrollbar-slider").css({height:J}),e.find(".lb-h-scrollbar-slider").css({width:K})}function b(t){F=(A-U(t).find(".lb-wrap").get(0).scrollHeight-R-Q)/(N-J),G=(z-U(t).find(".lb-wrap").get(0).scrollWidth-S-j)/(P-K);var r=U(t);r.attr("vratio",F),r.attr("hratio",G)}function f(t){var l=U(t);(C||B)&&l.find(".lb-wrap").scroll(function(t){if(l.find(".lb-v-scrollbar-slider").css({top:-U(this).scrollTop()/l.attr("vratio")}),l.find(".lb-h-scrollbar-slider").css({left:-U(this).scrollLeft()/l.attr("hratio")}),l.find(".lb-v-scrollbar").height()==parseInt(l.find(".lb-v-scrollbar-slider").css("top"))+l.find(".lb-v-scrollbar-slider").height()&&"function"==typeof i.reachedBottom&&!x){x=!0;var r=U(this);i.reachedBottom.apply(U(this).children(".lb-content"),[function(){s(U(r).parent(),{height:U(r).children(".lb-content").get(0).scrollHeight,width:U(r).children(".lb-content").get(0).scrollWidth}),d(U(r).parent()),h(U(r).parent()),b(U(r).parent()),c(),x=!1}])}if(l.find(".lb-h-scrollbar").width()==parseInt(l.find(".lb-h-scrollbar-slider").css("left"))+l.find(".lb-h-scrollbar-slider").width()&&"function"==typeof i.reachedRight&&!H){H=!0;r=U(this);i.reachedRight.apply(U(this).children(".lb-content"),[function(){s(U(r).parent(),{height:U(r).children(".lb-content").get(0).scrollHeight,width:U(r).children(".lb-content").get(0).scrollWidth}),d(U(r).parent()),h(U(r).parent()),b(U(r).parent()),c(),H=!1}])}autohide&&(l.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeIn(150),clearTimeout(e),e=setTimeout(function(){l.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeOut(150)},2e3))}),C&&(l.find(".lb-v-scrollbar-slider").mousedown(function(t){return n=t.pageY,w=!0,m=U(this),I=l.find(".lb-wrap"),v=I.parent().attr("vratio"),g=m.position().top,!1}),l.find(".lb-v-scrollbar").mousedown(function(t){return U(t.target).hasClass("lb-v-scrollbar-slider")||l.find(".lb-wrap").scrollTop((t.pageY-U(this).offset().top)*Math.abs(l.attr("vratio"))-U(this).find(".lb-v-scrollbar-slider").height()/2),!1})),B&&(l.find(".lb-h-scrollbar-slider").mousedown(function(t){return r=t.pageX,u=!0,m=U(this),I=l.find(".lb-wrap"),v=I.parent().attr("hratio"),g=m.position().left,!1}),l.find(".lb-h-scrollbar").mousedown(function(t){return U(t.target).hasClass("lb-h-scrollbar-slider")||l.find(".lb-wrap").scrollLeft((t.pageX-U(this).offset().left)*Math.abs(l.attr("hratio"))-U(this).find(".lb-h-scrollbar-slider").width()/2),!1})),(C||B)&&autohide&&(l.find(".lb-v-scrollbar, .lb-h-scrollbar").hide(),l.hover(function(){},function(){l.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeOut(150)}))}autohide=(i=i||{}).autohide;var e,r,n,l,p,v,g,u=!1,w=!1,m=0,I=0,x=!1,H=!1,W=U(this),M=0,y=0,T=0,B=!1,C=!1,L=0,X=0,Y=0,O=0,R=0,j=0,Q=0,S=0,k=0,q=0,z=0,A=0,D=0,E=0,F=0,G=0,J=0,K=0,N=0,P=0;return function(){for(var t=0;void 0!==W[t];t++)a(W[t])&&!U(W[t]).hasClass("nolionbars")&&(target=W[t],s(target),r=target,l=C,i=B,e=void 0,e=U(r),(void 0!==(n=e.attr("id"))?(e.wrapInner('<div class="lb-wrap" id="lb-wrap-'+M+"-"+n+'"></div>'),U("#lb-wrap-"+M+"-"+n)):(e.wrapInner('<div class="lb-wrap" id="lb-wrap-'+M+'"></div>'),U("#lb-wrap-"+M))).wrapInner('<div class="lb-content"></div>'),l&&(e.prepend('<div class="lb-v-scrollbar"></div>'),e.find(".lb-v-scrollbar").append('<div class="lb-v-scrollbar-slider"></div>')),i&&(e.prepend('<div class="lb-h-scrollbar"></div>'),e.find(".lb-h-scrollbar").append('<div class="lb-h-scrollbar-slider"></div>')),M+=1,o(target,C,B),d(target),h(target),b(target),f(target),c());var r,l,i,e,n}(),U(document).mousemove(function(t){w&&(p=t.pageY,I.scrollTop((g+p-n)*Math.abs(v))),u&&(l=t.pageX,I.scrollLeft((g+l-r)*Math.abs(v)))}),U(document).mouseup(function(t){w&&(w=!1),u&&(u=!1)}),this.each(function(){})}}(jQuery);