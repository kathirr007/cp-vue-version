!function(u){var l=u.ajax,i=[],c=[],p=[],a=/=\?(&|$)/,f=(new Date).getTime();function d(e,t){return e[t]===u.mockjaxSettings[t]}function x(e,t){if(u.isFunction(e))return e(t);if(u.isFunction(e.url.test)){if(!e.url.test(t.url))return null}else{var n=e.url.indexOf("*");if(e.url!==t.url&&-1===n||!new RegExp(e.url.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".+")).test(t.url))return null}return!e.data||t.data&&function t(n,o){var s=!0;return"string"==typeof o?u.isFunction(n.test)?n.test(o):n==o:(u.each(n,function(e){if(void 0===o[e])return s=!1;s="object"==typeof o[e]&&null!==o[e]?(s&&u.isArray(o[e])&&(s=u.isArray(n[e])&&o[e].length===n[e].length),s&&t(n[e],o[e])):n[e]&&u.isFunction(n[e].test)?s&&n[e].test(o[e]):s&&n[e]==o[e]}),s)}(e.data,t.data)?e&&e.type&&e.type.toLowerCase()!=t.type.toLowerCase()?null:e:null}function h(e){if(u.isArray(e)){var t=e[0],n=e[1];return"number"==typeof t&&"number"==typeof n?Math.floor(Math.random()*(n-t))+t:null}return"number"==typeof e?e:null}function g(t,n,o){var s,r=(s=this,function(){return function(){function e(){var e;this.readyState=4,"json"==n.dataType&&"object"==typeof t.responseText?this.responseText=JSON.stringify(t.responseText):"xml"==n.dataType?"string"==typeof t.responseXML?(this.responseXML=function(e){null==window.DOMParser&&window.ActiveXObject&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t});try{var t=(new DOMParser).parseFromString(e,"text/xml");if(!u.isXMLDoc(t))throw new Error("Unable to parse XML");if(1==u("parsererror",t).length)throw new Error("Error: "+u(t).text());return t}catch(e){var n=null==e.name?e:e.name+": "+e.message;return void u(document).trigger("xmlParseError",[n])}}(t.responseXML),this.responseText=t.responseXML):this.responseXML=t.responseXML:"object"==typeof t.responseText&&null!==t.responseText?(t.contentType="application/json",this.responseText=JSON.stringify(t.responseText)):this.responseText=t.responseText,"number"!=typeof t.status&&"string"!=typeof t.status||(this.status=t.status),"string"==typeof t.statusText&&(this.statusText=t.statusText),e=this.onreadystatechange||this.onload,u.isFunction(e)?(t.isTimeout&&(this.status=-1),e.call(this,t.isTimeout?"timeout":void 0)):t.isTimeout&&(this.status=-1)}if(this.status=t.status,this.statusText=t.statusText,this.readyState=1,u.isFunction(t.response)){if(2===t.response.length)return void t.response(o,function(){e.call(s)});t.response(o)}e.call(s)}.apply(s)});t.proxy?l({global:!1,url:t.proxy,type:t.proxyType,data:t.data,dataType:"script"===n.dataType?"text/plain":n.dataType,complete:function(e){t.responseXML=e.responseXML,t.responseText=e.responseText,d(t,"status")&&(t.status=e.status),d(t,"statusText")&&(t.statusText=e.statusText),this.responseTimer=setTimeout(r,h(t.responseTime)||0)}}):!1===n.async?r():this.responseTimer=setTimeout(r,h(t.responseTime)||50)}function m(e,t,n){if(function(e){"GET"===e.type.toUpperCase()?a.test(e.url)||(e.url+=(/\?/.test(e.url)?"&":"?")+(e.jsonp||"callback")+"=?"):e.data&&a.test(e.data)||(e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?")}(e),e.dataType="json",e.data&&a.test(e.data)||a.test(e.url)){!function(t,n,e){var o=e&&e.context||t,s=t.jsonpCallback||"jsonp"+f++;t.data&&(t.data=(t.data+"").replace(a,"="+s+"$1"));t.url=t.url.replace(a,"="+s+"$1"),window[s]=window[s]||function(e){data=e,T(t,o,n),y(t,o),window[s]=void 0;try{delete window[s]}catch(e){}head&&head.removeChild(script)}}(e,t,n);var o=/^(\w+:)?\/\/([^\/?#]+)/.exec(e.url),s=o&&(o[1]&&o[1]!==location.protocol||o[2]!==location.host);if(e.dataType="script","GET"===e.type.toUpperCase()&&s){var r=function(e,t,n){var o=n&&n.context||e,s=null;t.response&&u.isFunction(t.response)?t.response(n):"object"==typeof t.responseText?u.globalEval("("+JSON.stringify(t.responseText)+")"):u.globalEval("("+t.responseText+")");setTimeout(function(){T(e,o,t),y(e,o)},h(t.responseTime)||0),u.Deferred&&(s=new u.Deferred,"object"==typeof t.responseText?s.resolveWith(o,[t.responseText]):s.resolveWith(o,[u.parseJSON(t.responseText)]));return s}(e,t,n);return r||!0}}return null}function T(e,t,n){e.success&&e.success.call(t,n.responseText||"",status,{}),e.global&&(e.context?u(e.context):u.event).trigger("ajaxSuccess",[{},e])}function y(e,t){e.complete&&e.complete.call(t,{},status),e.global&&(e.context?u(e.context):u.event).trigger("ajaxComplete",[{},e]),e.global&&!--u.active&&u.event.trigger("ajaxStop")}function v(e,t){if(e.url instanceof RegExp&&e.hasOwnProperty("urlParams")){var n=e.url.exec(t.url);if(1!==n.length){n.shift();for(var o=0,s=n.length,r=e.urlParams.length,a=Math.min(s,r),i={};o<a;o++){i[e.urlParams[o]]=n[o]}t.urlParams=i}}}u.extend({ajax:function(e,o){var t,n,s,r;"object"==typeof e?(o=e,e=void 0):(o=o||{}).url=e,n=u.extend(!0,{},u.ajaxSettings,o),r=function(e,t){var n=o[e.toLowerCase()];return function(){u.isFunction(n)&&n.apply(this,[].slice.call(arguments)),t["onAfter"+e]()}};for(var a=0;a<i.length;a++)if(i[a]&&(s=x(i[a],n)))return c.push(n),u.mockjaxSettings.log(s,n),n.dataType&&"JSONP"===n.dataType.toUpperCase()&&(t=m(n,s,o))||(s.cache=n.cache,s.timeout=n.timeout,s.global=n.global,s.isTimeout&&(1<s.responseTime?o.timeout=s.responseTime-1:(s.responseTime=2,o.timeout=1),s.isTimeout=!1),u.isFunction(s.onAfterSuccess)&&(o.success=r("Success",s)),u.isFunction(s.onAfterError)&&(o.error=r("Error",s)),u.isFunction(s.onAfterComplete)&&(o.complete=r("Complete",s)),v(s,o),function(s,r,a,i){t=l.call(u,u.extend(!0,{},a,{xhr:function(){return t=s,n=r,e=a,o=i,void 0===(t=u.extend(!0,{},u.mockjaxSettings,t)).headers&&(t.headers={}),void 0===n.headers&&(n.headers={}),t.contentType&&(t.headers["content-type"]=t.contentType),{status:t.status,statusText:t.statusText,readyState:1,open:function(){},send:function(){o.fired=!0,g.call(this,t,n,e)},abort:function(){clearTimeout(this.responseTimer)},setRequestHeader:function(e,t){n.headers[e]=t},getResponseHeader:function(e){return t.headers&&t.headers[e]?t.headers[e]:"last-modified"==e.toLowerCase()?t.lastModified||(new Date).toString():"etag"==e.toLowerCase()?t.etag||"":"content-type"==e.toLowerCase()?t.contentType||"text/plain":void 0},getAllResponseHeaders:function(){var n="";return t.contentType&&(t.headers["Content-Type"]=t.contentType),u.each(t.headers,function(e,t){n+=e+": "+t+"\n"}),n}};var t,n,e,o}}))}(s,n,o,i[a])),t;if(p.push(o),!0===u.mockjaxSettings.throwUnmocked)throw new Error("AJAX not mocked: "+o.url);return l.apply(u,[o])}}),u.mockjaxSettings={log:function(e,t){if(!1!==e.logging&&(void 0!==e.logging||!1!==u.mockjaxSettings.logging)&&window.console&&console.log){var n="MOCK "+t.type.toUpperCase()+": "+t.url,o=u.extend({},t);if("function"==typeof console.log)console.log(n,o);else try{console.log(n+" "+JSON.stringify(o))}catch(e){console.log(n)}}},logging:!0,status:200,statusText:"OK",responseTime:500,isTimeout:!1,throwUnmocked:!1,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",proxyType:"GET",lastModified:null,etag:"",headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"}},u.mockjax=function(e){var t=i.length;return i[t]=e,t},u.mockjax.clear=function(e){1==arguments.length?i[e]=null:i=[],c=[],p=[]},u.mockjaxClear=function(e){window.console&&window.console.warn&&window.console.warn("DEPRECATED: The $.mockjaxClear() method has been deprecated in 1.6.0. Please use $.mockjax.clear() as the older function will be removed soon!"),u.mockjax.clear()},u.mockjax.handler=function(e){if(1==arguments.length)return i[e]},u.mockjax.mockedAjaxCalls=function(){return c},u.mockjax.unfiredHandlers=function(){for(var e=[],t=0,n=i.length;t<n;t++){var o=i[t];null===o||o.fired||e.push(o)}return e},u.mockjax.unmockedAjaxCalls=function(){return p}}(jQuery);